---
title: "Nominal house prices data in Luxembourg - Analysis"
author: "Jake Tufts"
date: "`r Sys.Date()`"
---

```{r, warning=FALSE, message=FALSE}
library(dplyr)
library(ggplot2)
library(tidyr)
```


Load the datasets

```{r}
commune_level_data <- read.csv("datasets/house_prices_commune_level_data.csv")
country_level_data <- read.csv("datasets/house_prices_country_level_data.csv")
```


The index for each commune and by country

```{r}
commune_level_data <- get_laspeyeres_index(commune_level_data)

country_level_data <- get_laspeyeres_index(country_level_data)
```


We are going to create a plot for 5 communes and compare the price evolution in the communes
to the national price evolution. Letâ€™s first list the communes:

```{r}
communes <- c("Luxembourg",
              "Esch-sur-Alzette",
              "Mamer",
              "Schengen",
              "Wincrange")

```


Plot the house price data by commune

```{r, results='asis'}
res <- lapply(communes, function(x){
  
  knitr::knit_child(text = c(
    
    '\n',
    '## Plot for commune `r x`',
    '\n',
    '```{r, echo = FALSE}',
    'print(make_plot(x))',
    '```'
    
  ),
  envir = environment(),
  quiet = TRUE)
  
})

cat(unlist(res), sep="\n")
```

